<mat-card class="card submitPost">
  <form class="post-form" [formGroup]="postForm" (ngSubmit)="onSubmitPost(postForm.value)">
    <mat-form-field class="post-field-full-width">
      <input  id="title"  type="hidden"  formControlName="title">
      <input  id="postdate"  type="hidden"  formControlName="postdate">
      <input  id="author" type="hidden" formControlName="author">
      <input matInput id="content" type="text" placeholder="Créez un nouveau post" formControlName="content">
    </mat-form-field>
    <button mat-raised-button color="primary" type="submit">Envoyer</button>
  </form>
</mat-card>

<div class="card post" *ngFor="let post of (feed | async)" >
  <mat-card class="card">
    <mat-card-header  [attr.data-message-id]="post.id">
      <mat-card-subtitle>
        <b>{{post.author}}</b>
        <span class="date">
          <!--  date formatée -->
          {{post.postdate.split(" ")[0].split("-")[2]}}/{{post.postdate.split(" ")[0].split("-")[1]}}/{{post.postdate.split(" ")[0].split("-")[0]}} à
          <!--  heure formatée -->
          {{post.postdate.split(" ")[1].split(":")[0]}}:{{post.postdate.split(" ")[1].split(":")[1]}}
        </span>
      </mat-card-subtitle>
      <mat-card-title>{{post.title}}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <p>{{post.content}}</p>

    </mat-card-content>
    <img src="https://s3.amazonaws.com/pix.iemoji.com/images/emoji/apple/ios-12/256/revolving-hearts.png"
         height="25px" width ="25px" (click)="likeUnlike(post.id)" style="position:absolute;right:15px;top:25px;cursor:pointer">
    <div *ngFor="let like of likes ">
      <span *ngIf="like.post==post.id" style="position:absolute;right:10px;top:5px">
         aimé par {{like.author}} personne(s)
      </span>
    </div>
    <div *ngFor="let comment of values" >
      <div *ngFor="let c of comment">
        <div *ngIf="c.postId==post.id">
        <mat-card class="card comment">
              <h5 >
               {{c.author}}
                <span class="date comment">
                  <!--  date formatée -->
                  {{c.date.split(" ")[0].split("-")[2]}}/{{c.date.split(" ")[0].split("-")[1]}}/{{c.date.split(" ")[0].split("-")[0]}} à
                  <!--  heure formatée -->
                  {{c.date.split(" ")[1].split(":")[0]}}:{{c.date.split(" ")[1].split(":")[1]}}
                 </span>
              </h5>
              <p>{{c.content}}</p>
            </mat-card>
          </div>
      </div>
    </div>

    <mat-divider></mat-divider>
    <form class="comment-form" [formGroup]="commentForm" (ngSubmit)="onSubmitComment(commentForm.value)">
      <mat-form-field class="comment-field-full-width">
        <input  type="hidden" value="Sylvanas Windrunner" formControlName="author">
        <input   type="hidden"  formControlName="dateComment">
        <input matInput type="text" placeholder="Ajoutez un commentaire" formControlName="content">
      </mat-form-field>
      <button mat-raised-button color="primary" type="submit"><mat-icon aria-hidden="false" aria-label="Example home icon">send</mat-icon></button>
    </form>
  </mat-card>
</div>
<mat-card class="example-card" style="position:fixed;top:150px;right:45px;max-width:250px" cdkDrag matTooltip="Drag me!">
  <mat-card-header>
    <mat-card-title>Liste des utilisateurs</mat-card-title>

  </mat-card-header>

      <div *ngFor="let user of users" style="text-align:center" >
        <div style="padding:10px">
          {{user.name}}
        </div>
        <mat-divider></mat-divider>
      </div>


</mat-card>

